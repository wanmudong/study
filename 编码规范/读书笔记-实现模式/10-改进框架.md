### 改进框架

#### 修改框架而不修改应用

要提高框架带来的收益，就必然要减少不兼容的更新的可能性，同时，当不兼容的更新势在必行时，也要缩小它所引发的后果。

#### 不兼容的更新

如果对框架的修改出现了无法向前的兼容。

1. 不要再一次发布中同时修改API和具体实现。通过委派实现过渡。
2. 提供工具，为客户代码进行兼容式更新。



#### 鼓励可兼容的变化

框架提供给客户的形式：

- 程序类库：将所有功能都表示为使用简单参数的调用过程，不用反向未来的不兼容，但其本身的扩展性不强，无法去表达更多。
- 对象：
  - 使用方式：实例化、配置和实现
  - 抽象：将抽象接口表示为接口还是超类。接口新增方法会破坏客户代码，超类不会
  - 创建方式：无对象创建、构造器、静态工厂、工厂对象（根据场景产生不同的工厂对象从而通过工厂对象制造不同的对象）。
  - 方法：除了对象创建方法外，其他方法的变更也会影响客户的代码。尽量维护兼容性，即对于新增方法或者方法变更后，避免让客户感知。



小结：框架与业务代码的价值的区别：业务代码是为了实现迭代，需要后续人能够读懂代码进行迭代；框架是迭代后，需要避免客户代码发生变更。

注意：框架是一个领域内所有有价值的功能的交集，而不是并集。这要求在写框架时，考虑通用性，避免既要...还要...的情况。

