# 第一个案例

[TOC]

说在前面：这一章用于概述重构，最好看原文。



#### 为什么要重构

如果你发现自己需要为程序新增一个特性，而代码结构是你无法很方便的那么做，那就先重构那个程序，是特性的添加比较容易进行，然后再添加特性。

（这里可以与创建店铺相比较，新增一个处理，要为所有接口实现新增，这应该吗？）



#### 重构的关键

不改变原有功能。也就说是，测试、测试、还是TM的测试。



#### 如何重构

重构这个词本身就包含将原有的东西分解后再重组。所以我们要做的就是去**分解并重组**代码结构。

需要注意的点：

- 分解很重要，分解决定了我们要重构的范围，但也很危险。因此，我们最好一步步分解。毕竟酒要一口一口喝，路要一步一步走，步子买大了，喀，容易扯着蛋。

- 重构的目的是为了新增功能，我们会很频繁得在二者之间切换，因此需要注意明确自己当前的目的，别以为自己在新增功能，其实却在做着重构的活。

  

#### 重构带来的问题

- 代码量的增加。单纯的合并逻辑，会给我们减少代码量，但我们常用各种模式来优化代码的可读性与易于修改的性质，这使得我们新增了额外的非业务代码。
- 性能。重构不仅是优化代码的可阅读性，优化其性能也是一个关键。对内提供一个更为优质的代码，对外提供一个更为优质的服务。
- 功能。上面提到了，通过引入完备的测试方案，避免出现功能的变更。







