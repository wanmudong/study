mysql基于成本的优化

成本：

IO：访问页面成本为1.0

CPU：对一条记录处理为0.2



#### 较为精确的计算方式

全表访问成本：全表的页数 * 1.0+全表的记录 * 0.2

二级索引访问成本：

```SQL
 二级索引的区间数 * 1.0 （二级索引读取的IO成本）+ 索引记录数 * 0.2 （二级索引判断记录是否符合条件的判断成本） 
 + 索引记录数 * 1.0 （聚集索引回表的IO成本）+ 索引记录数 * 0.2  (回表时判断记录是否符合条件的判断成本)
```



#### 基于索引统计数据的成本计算

我们认为：一个值的重复次数 ≈ Rows ÷ Cardinality

当查询语句是SELECT * FROM single_table WHERE key1 IN ('aa1', 'aa2', 'aa3', ... , 'zzz');

假设此时in中的参数为n，则需要回表的记录数为：**n * 一个值的重复次数**

计算容易，但不精确。

